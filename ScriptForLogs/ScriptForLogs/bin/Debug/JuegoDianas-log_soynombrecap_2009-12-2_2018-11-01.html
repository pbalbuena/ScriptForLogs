commit 4d534bbbbb91482e697009204bbf047c983206bbAuthor: soynombrecap <pbalbuena13@gmail.com>Date:   Fri Dec 15 17:50:40 2017 +0100    Menu activity incorporada, m√°s dianas y todo funcionantte. 11 files changed, 448 insertions(+), 28 deletions(-)diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xmlindex 0b98c5f..accf3fb 100644<p style='color:red'>--- a/app/src/main/AndroidManifest.xml</p><p style='color:green'>+++ b/app/src/main/AndroidManifest.xml</p>@@ -10,12 +10,15 @@         android:supportsRtl="true"         android:theme="@style/AppTheme">         <activity android:name=".MainActivity"><p style='color:green'>+</p><p style='color:green'>+        </activity></p><p style='color:green'>+</p><p style='color:green'>+        <activity android:name=".MenuActivity"></p>             <intent-filter>                 <action android:name="android.intent.action.MAIN" />                  <category android:name="android.intent.category.LAUNCHER" />             </intent-filter><p style='color:red'>-</p>         </activity>     </application> diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.javaindex 02d8174..aae11a2 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p>@@ -1,6 +1,7 @@ package es.uniovi.balbuena.juegodianas;  import android.content.Context;<p style='color:green'>+import android.content.Intent;</p> import android.graphics.Canvas; import android.util.Log; import android.view.MotionEvent;@@ -10,6 +11,7 @@ import java.util.LinkedList; import java.util.List; import java.util.concurrent.TimeUnit; <p style='color:green'>+import es.uniovi.balbuena.juegodianas.gestores.GestorNiveles;</p> import es.uniovi.balbuena.juegodianas.global.Estados; import es.uniovi.balbuena.juegodianas.modelos.Cannon; import es.uniovi.balbuena.juegodianas.modelos.Diana;@@ -23,6 +25,8 @@ import es.uniovi.balbuena.juegodianas.modelos.controles.Marcador; import es.uniovi.balbuena.juegodianas.modelos.escenario.Fondo; import es.uniovi.balbuena.juegodianas.modelos.utilidades.Ar; <p style='color:green'>+import static android.support.v4.content.ContextCompat.startActivity;</p><p style='color:green'>+</p> /**  * Created by Balbuena on 08/12/2017.  */@@ -69,7 +73,6 @@ public class GameView extends View {          fondo = new Fondo (context, Ar.x(320/2), Ar.y(480/2));         cannon = new Cannon(context,  Ar.x(320/2), Ar.y(390));<p style='color:red'>-        Diana d = new DianaFacil(context, Ar.x(50), Ar.y(50));</p>         marcador = new Marcador(context, Ar.x(30), Ar.y(30));         ObstaculoFacil obstaculoFacil = new ObstaculoFacil(context, Ar.x(50), Ar.y(250));         ObstaculoIrrompible obstaculoIrrompible = new ObstaculoIrrompible(context, Ar.x(250), Ar.y(150));@@ -77,8 +80,7 @@ public class GameView extends View {          disparoCannons = new LinkedList<DisparoCannon>(); <p style='color:red'>-        dianas = new LinkedList<Diana>();</p><p style='color:red'>-        dianas.add(d);</p><p style='color:green'>+        dianas = GestorNiveles.getInstancia().getDianasNivelActual(context);</p>          obstaculos = new LinkedList<Obstaculo>();         obstaculos.add(obstaculoFacil);@@ -124,9 +126,10 @@ public class GameView extends View {          for (Diana d: dianas              ) {<p style='color:red'>-            if (d.estaEnPantalla() == -1 || d.estado == Estados.INACTIVO) {</p><p style='color:green'>+            if (/*d.estaEnPantalla() == -1 ||*/ d.estado == Estados.INACTIVO) {</p>                 Log.i("esta en pantalla?", " " + d.estaEnPantalla());                 Log.i("esta en activo?", " " + d.estado);<p style='color:green'>+                Log.i("diana ", d.toString() + " destruida");</p>                 dianaSacarLista  = d;             } @@ -192,7 +195,9 @@ public class GameView extends View {     private void gl_comprobarNivelFinalizado(){         if(dianas.size() == 0){             finJuego = true;<p style='color:red'>-            ((MainActivity) context).finish();</p><p style='color:green'>+            ((MainActivity) context).finish();/*</p><p style='color:green'>+            Intent actividadJuego = new Intent(MenuActivity.class, MainActivity.class);</p><p style='color:green'>+            startActivity(actividadJuego);*/</p>         }     } @@ -204,7 +209,7 @@ public class GameView extends View {         for (Diana d : dianas              ) {             d.moverAutomaticamente();<p style='color:red'>-            Log.i("coord disparo x y", d.getX() + " " + d.getY());</p><p style='color:green'>+           //Log.i("coord disparo x y", d.getX() + " " + d.getY());</p>         }         for (DisparoCannon disparos : disparoCannons                 ) {@@ -299,7 +304,7 @@ public class GameView extends View {                        gl_moverElementos();                       gl_comprobarColisiones();<p style='color:red'>-</p><p style='color:green'>+                    gl_comprobarNivelFinalizado();</p>                      // Re-dibujar onDraw(Canvas canvas)                     postInvalidate();diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/MenuActivity.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/MenuActivity.javanew file mode 100644index 0000000..c8c8fb8<p style='color:red'>--- /dev/null</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/MenuActivity.java</p>@@ -0,0 +1,43 @@<p style='color:green'>+package es.uniovi.balbuena.juegodianas;</p><p style='color:green'>+</p><p style='color:green'>+import android.app.Activity;</p><p style='color:green'>+import android.content.Intent;</p><p style='color:green'>+import android.media.AudioManager;</p><p style='color:green'>+import android.os.Bundle;</p><p style='color:green'>+import android.view.View;</p><p style='color:green'>+import android.view.Window;</p><p style='color:green'>+import android.view.WindowManager;</p><p style='color:green'>+import android.widget.ImageButton;</p><p style='color:green'>+</p><p style='color:green'>+/**</p><p style='color:green'>+ * Created by Balbuena on 15/12/2017.</p><p style='color:green'>+ */</p><p style='color:green'>+</p><p style='color:green'>+public class MenuActivity extends Activity {</p><p style='color:green'>+    @Override</p><p style='color:green'>+    protected void onCreate(Bundle savedInstanceState) {</p><p style='color:green'>+        super.onCreate(savedInstanceState);</p><p style='color:green'>+        // Establecer el control de sonido multimedia como predefinido</p><p style='color:green'>+        this.setVolumeControlStream(AudioManager.STREAM_MUSIC);</p><p style='color:green'>+</p><p style='color:green'>+        // Pantalla completa, sin titulo</p><p style='color:green'>+        requestWindowFeature(Window.FEATURE_NO_TITLE);</p><p style='color:green'>+        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,</p><p style='color:green'>+                WindowManager.LayoutParams.FLAG_FULLSCREEN);</p><p style='color:green'>+</p><p style='color:green'>+        setContentView(R.layout.activity_menu);</p><p style='color:green'>+</p><p style='color:green'>+        // Recuperamos el control a partir de su ID</p><p style='color:green'>+        ImageButton botonNuevoJuego = (ImageButton) findViewById(R.id.imageButton);</p><p style='color:green'>+        botonNuevoJuego.setOnClickListener(new View.OnClickListener() {</p><p style='color:green'>+            public void onClick(View v) {</p><p style='color:green'>+                // Abrir una nueva actividad desde otra</p><p style='color:green'>+                Intent actividadJuego = new Intent(MenuActivity.this, MainActivity.class);</p><p style='color:green'>+                startActivity(actividadJuego);</p><p style='color:green'>+                // Cerrar la actividad actual</p><p style='color:green'>+                finish();</p><p style='color:green'>+            }</p><p style='color:green'>+        });</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+}</p>diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/gestores/GestorNiveles.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/gestores/GestorNiveles.javaindex c84de7e..f935a51 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/gestores/GestorNiveles.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/gestores/GestorNiveles.java</p>@@ -1,6 +1,7 @@ package es.uniovi.balbuena.juegodianas.gestores;  import android.content.Context;<p style='color:green'>+import android.util.Log;</p>  import org.w3c.dom.Document; import org.w3c.dom.Element;@@ -14,7 +15,15 @@ import java.util.List;  import es.uniovi.balbuena.juegodianas.R; import es.uniovi.balbuena.juegodianas.modelos.Diana;<p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.DianaEfimera;</p> import es.uniovi.balbuena.juegodianas.modelos.DianaFacil;<p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.DianaJefe;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.Obstaculo;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.ObstaculoFacil;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.ObstaculoIrrompible;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.PowerUp;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.PowerUpAtaque;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.PowerUpPuntuacion;</p> import es.uniovi.balbuena.juegodianas.modelos.utilidades.Ar;  /**@@ -64,6 +73,41 @@ public class GestorNiveles {         return dianas;     } <p style='color:green'>+    public List<Obstaculo> getObstaculosNivelActual(Context context) {</p><p style='color:green'>+        List<Obstaculo> obstaculos = new LinkedList<Obstaculo>();</p><p style='color:green'>+        switch (nivelActual) {</p><p style='color:green'>+            case 1:</p><p style='color:green'>+                obstaculos = cargarObstaculosXML(context, R.raw.level1);</p><p style='color:green'>+                break;</p><p style='color:green'>+                /*</p><p style='color:green'>+            case 2:</p><p style='color:green'>+                powerUps = cargarPowerUpsXML(context, R.raw.level2);</p><p style='color:green'>+                break;</p><p style='color:green'>+            case 3:</p><p style='color:green'>+                powerUps = cargarPowerUpsXML(context, R.raw.level3);</p><p style='color:green'>+                break;</p><p style='color:green'>+                */</p><p style='color:green'>+        }</p><p style='color:green'>+        return obstaculos;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public List<PowerUp> getPowerUpsNivelActual(Context context) {</p><p style='color:green'>+        List<PowerUp> powerUps = new LinkedList<PowerUp>();</p><p style='color:green'>+        switch (nivelActual) {</p><p style='color:green'>+            case 1:</p><p style='color:green'>+                powerUps = cargarPowerUpsXML(context, R.raw.level1);</p><p style='color:green'>+                break;</p><p style='color:green'>+                /*</p><p style='color:green'>+            case 2:</p><p style='color:green'>+                powerUps = cargarPowerUpsXML(context, R.raw.level2);</p><p style='color:green'>+                break;</p><p style='color:green'>+            case 3:</p><p style='color:green'>+                powerUps = cargarPowerUpsXML(context, R.raw.level3);</p><p style='color:green'>+                break;</p><p style='color:green'>+                */</p><p style='color:green'>+        }</p><p style='color:green'>+        return powerUps;</p><p style='color:green'>+    }</p>      public LinkedList<Diana> cargarEnemigosXML(Context context, int recursoNivel) { @@ -83,27 +127,109 @@ public class GestorNiveles {          Document doc = parser.getDom(textoFicheroNivel); <p style='color:red'>-        LinkedList<Diana> enemigos = new LinkedList<Diana>();</p><p style='color:green'>+        LinkedList<Diana> dianas = new LinkedList<Diana>();</p><p style='color:green'>+</p><p style='color:green'>+        NodeList nodosDianaFacil = doc.getElementsByTagName("dianaF");</p><p style='color:green'>+        for (int i = 0; i < nodosDianaFacil.getLength(); i++) {</p><p style='color:green'>+            Element elementoActual = (Element) nodosDianaFacil.item(i);</p><p style='color:green'>+            String x = parser.getValor(elementoActual, "x");</p><p style='color:green'>+            String y = parser.getValor(elementoActual, "y");</p><p style='color:green'>+            dianas.add(new DianaFacil(context, Ar.x(Double.parseDouble(x)), Ar.y(Double.parseDouble(y))));</p><p style='color:green'>+        }</p><p style='color:green'>+        Log.i("lista dianas", "size " + dianas.size());</p><p style='color:green'>+</p><p style='color:green'>+        NodeList nodosDianaEfimera = doc.getElementsByTagName("dianaE");</p><p style='color:green'>+        for (int i = 0; i < nodosDianaEfimera.getLength(); i++) {</p><p style='color:green'>+            Element elementoActual = (Element) nodosDianaEfimera.item(i);</p><p style='color:green'>+            String x = parser.getValor(elementoActual, "x");</p><p style='color:green'>+            String y = parser.getValor(elementoActual, "y");</p><p style='color:green'>+            dianas.add(new DianaEfimera(context, Ar.x(Double.parseDouble(x)), Ar.y(Double.parseDouble(y))));</p><p style='color:green'>+        }</p><p style='color:green'>+        Log.i("lista dianas", "size " + dianas.size());</p><p style='color:green'>+</p><p style='color:green'>+        NodeList nodosDianaJefe = doc.getElementsByTagName("dianaJ");</p><p style='color:green'>+        for (int i = 0; i < nodosDianaJefe.getLength(); i++) {</p><p style='color:green'>+            Element elementoActual = (Element) nodosDianaJefe.item(i);</p><p style='color:green'>+            String x = parser.getValor(elementoActual, "x");</p><p style='color:green'>+            String y = parser.getValor(elementoActual, "y");</p><p style='color:green'>+            dianas.add(new DianaJefe(context, Ar.x(Double.parseDouble(x)), Ar.y(Double.parseDouble(y))));</p><p style='color:green'>+        }</p><p style='color:green'>+        Log.i("lista dianas", "size " + dianas.size());</p><p style='color:green'>+        return dianas;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+</p> <p style='color:red'>-        NodeList nodosEnemigoNave = doc.getElementsByTagName("dianaF");</p><p style='color:red'>-        for (int i = 0; i < nodosEnemigoNave.getLength(); i++) {</p><p style='color:red'>-            Element elementoActual = (Element) nodosEnemigoNave.item(i);</p><p style='color:green'>+    public LinkedList<PowerUp> cargarPowerUpsXML(Context context, int recursoNivel) {</p><p style='color:green'>+        ParserXML parser = new ParserXML();</p><p style='color:green'>+        String textoFicheroNivel = "";</p><p style='color:green'>+        try {</p><p style='color:green'>+            InputStream inputStream = context.getResources().openRawResource(recursoNivel);</p><p style='color:green'>+            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));</p><p style='color:green'>+            String linea = bufferedReader.readLine();</p><p style='color:green'>+            while (linea != null) {</p><p style='color:green'>+                textoFicheroNivel += linea;</p><p style='color:green'>+                linea = bufferedReader.readLine();</p><p style='color:green'>+            }</p><p style='color:green'>+            bufferedReader.close();</p><p style='color:green'>+        } catch (Exception ex) {</p><p style='color:green'>+        }</p><p style='color:green'>+        Document doc = parser.getDom(textoFicheroNivel);</p><p style='color:green'>+        LinkedList<PowerUp> powerUps = new LinkedList<PowerUp>();</p><p style='color:green'>+</p><p style='color:green'>+        NodeList powerUps1 = doc.getElementsByTagName("powerUpA");</p><p style='color:green'>+        for (int i = 0; i < powerUps1.getLength(); i++) {</p><p style='color:green'>+            Element elementoActual = (Element) powerUps1.item(i);</p>             String x = parser.getValor(elementoActual, "x");             String y = parser.getValor(elementoActual, "y");<p style='color:red'>-            enemigos.add(new DianaFacil(context, Ar.x(Double.parseDouble(x)), Ar.y(Double.parseDouble(y))));</p><p style='color:green'>+            powerUps.add(new PowerUpAtaque(context, Ar.x(Double.parseDouble(x)), Ar.y(Double.parseDouble(y))));</p>         }<p style='color:red'>-/*</p><p style='color:red'>-        NodeList nodosEnemigoHelicoptero = doc.getElementsByTagName("enemyH");</p><p style='color:red'>-        for (int i = 0; i < nodosEnemigoHelicoptero.getLength(); i++) {</p><p style='color:red'>-            Element elementoActual = (Element) nodosEnemigoHelicoptero.item(i);</p><p style='color:green'>+</p><p style='color:green'>+        NodeList powerUps2 = doc.getElementsByTagName("powerUpP");</p><p style='color:green'>+        for (int i = 0; i < powerUps2.getLength(); i++) {</p><p style='color:green'>+            Element elementoActual = (Element) powerUps2.item(i);</p>             String x = parser.getValor(elementoActual, "x");             String y = parser.getValor(elementoActual, "y");<p style='color:red'>-            enemigos.add(new DianaNormal(context, Ar.x(Double.parseDouble(x)), Ar.y(Double.parseDouble(y))));</p><p style='color:red'>-        }*/</p><p style='color:red'>-        return enemigos;</p><p style='color:green'>+            powerUps.add(new PowerUpPuntuacion(context, Ar.x(Double.parseDouble(x)), Ar.y(Double.parseDouble(y))));</p><p style='color:green'>+        }</p><p style='color:green'>+        return powerUps;</p>     } <p style='color:green'>+    public LinkedList<Obstaculo> cargarObstaculosXML(Context context, int recursoNivel) {</p><p style='color:green'>+        ParserXML parser = new ParserXML();</p><p style='color:green'>+        String textoFicheroNivel = "";</p><p style='color:green'>+        try {</p><p style='color:green'>+            InputStream inputStream = context.getResources().openRawResource(recursoNivel);</p><p style='color:green'>+            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));</p><p style='color:green'>+            String linea = bufferedReader.readLine();</p><p style='color:green'>+            while (linea != null) {</p><p style='color:green'>+                textoFicheroNivel += linea;</p><p style='color:green'>+                linea = bufferedReader.readLine();</p><p style='color:green'>+            }</p><p style='color:green'>+            bufferedReader.close();</p><p style='color:green'>+        } catch (Exception ex) {</p><p style='color:green'>+        }</p><p style='color:green'>+        Document doc = parser.getDom(textoFicheroNivel);</p><p style='color:green'>+        LinkedList<Obstaculo> obstaculos = new LinkedList<Obstaculo>();</p><p style='color:green'>+</p><p style='color:green'>+        NodeList powerUps1 = doc.getElementsByTagName("obsF");</p><p style='color:green'>+        for (int i = 0; i < powerUps1.getLength(); i++) {</p><p style='color:green'>+            Element elementoActual = (Element) powerUps1.item(i);</p><p style='color:green'>+            String x = parser.getValor(elementoActual, "x");</p><p style='color:green'>+            String y = parser.getValor(elementoActual, "y");</p><p style='color:green'>+            obstaculos.add(new ObstaculoFacil(context, Ar.x(Double.parseDouble(x)), Ar.y(Double.parseDouble(y))) {</p><p style='color:green'>+            });</p><p style='color:green'>+        }</p> <p style='color:green'>+        NodeList powerUps2 = doc.getElementsByTagName("obsIrr");</p><p style='color:green'>+        for (int i = 0; i < powerUps2.getLength(); i++) {</p><p style='color:green'>+            Element elementoActual = (Element) powerUps2.item(i);</p><p style='color:green'>+            String x = parser.getValor(elementoActual, "x");</p><p style='color:green'>+            String y = parser.getValor(elementoActual, "y");</p><p style='color:green'>+            obstaculos.add(new ObstaculoIrrompible(context, Ar.x(Double.parseDouble(x)), Ar.y(Double.parseDouble(y))));</p><p style='color:green'>+        }</p><p style='color:green'>+        return obstaculos;</p><p style='color:green'>+    }</p>   diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaEfimera.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaEfimera.javanew file mode 100644index 0000000..1674405<p style='color:red'>--- /dev/null</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaEfimera.java</p>@@ -0,0 +1,112 @@<p style='color:green'>+package es.uniovi.balbuena.juegodianas.modelos;</p><p style='color:green'>+</p><p style='color:green'>+import android.content.Context;</p><p style='color:green'>+import android.graphics.BitmapFactory;</p><p style='color:green'>+import android.graphics.Canvas;</p><p style='color:green'>+</p><p style='color:green'>+import java.util.HashMap;</p><p style='color:green'>+</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.R;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.global.Estados;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.graficos.Sprite;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.utilidades.Ar;</p><p style='color:green'>+</p><p style='color:green'>+/**</p><p style='color:green'>+ * Created by Balbuena on 15/12/2017.</p><p style='color:green'>+ */</p><p style='color:green'>+</p><p style='color:green'>+public class DianaEfimera extends Diana {</p><p style='color:green'>+    public static final String BASICO = "basico";</p><p style='color:green'>+    public static final String EXPLOTAR = "Explotar";</p><p style='color:green'>+</p><p style='color:green'>+    private Sprite sprite;</p><p style='color:green'>+    private HashMap<String,Sprite> sprites = new HashMap<String,Sprite> ();</p><p style='color:green'>+</p><p style='color:green'>+</p><p style='color:green'>+    public DianaEfimera(Context context, double x, double y) {</p><p style='color:green'>+        super(context, x, y);</p><p style='color:green'>+        altura = Ar.altura(40);</p><p style='color:green'>+        ancho = Ar.ancho(40);</p><p style='color:green'>+</p><p style='color:green'>+        //puntuacion</p><p style='color:green'>+        setPuntuacion(5);</p><p style='color:green'>+</p><p style='color:green'>+        imagen = context.getResources().getDrawable(R.drawable.diana2);</p><p style='color:green'>+</p><p style='color:green'>+        Sprite basico = new Sprite(BitmapFactory.decodeResource(</p><p style='color:green'>+                context.getResources(), R.drawable.diana2), ancho, altura, 1, 1, false);</p><p style='color:green'>+        sprites.put(BASICO, basico);</p><p style='color:green'>+</p><p style='color:green'>+        Sprite explotar = new Sprite(BitmapFactory.decodeResource(</p><p style='color:green'>+                context.getResources(), R.drawable.animacion_enemigo_explotar), ancho, altura, 6, 6, false);</p><p style='color:green'>+        sprites.put(EXPLOTAR, explotar);</p><p style='color:green'>+</p><p style='color:green'>+        sprite = basico;</p><p style='color:green'>+</p><p style='color:green'>+        aceleracionX = 6;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public void dibujarEnPantalla(Canvas canvas) {</p><p style='color:green'>+        if(estado != Estados.INACTIVO) {</p><p style='color:green'>+            int yArriba = (int) y - altura / 2;</p><p style='color:green'>+            int xIzquierda = (int) x - ancho / 2;</p><p style='color:green'>+</p><p style='color:green'>+            imagen.setBounds(xIzquierda, yArriba, xIzquierda</p><p style='color:green'>+                    + ancho, yArriba + altura);</p><p style='color:green'>+            imagen.draw(canvas);</p><p style='color:green'>+        }</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public void moverAutomaticamente() {</p><p style='color:green'>+</p><p style='color:green'>+        boolean finalizaSprite = sprite.actualizar(System.currentTimeMillis());</p><p style='color:green'>+</p><p style='color:green'>+        if (sprite == sprites.get(EXPLOTAR) && finalizaSprite) {</p><p style='color:green'>+            imagen = null;</p><p style='color:green'>+            //sprite = sprites.get(EXPLOTAR);</p><p style='color:green'>+            estado = Estados.INACTIVO;</p><p style='color:green'>+        }</p><p style='color:green'>+</p><p style='color:green'>+        //si sale por la derecha, desaparece</p><p style='color:green'>+        if (x - ancho / 2 >= mCanvasAncho && aceleracionX >0){</p><p style='color:green'>+            estado = Estados.INACTIVO;</p><p style='color:green'>+        }</p><p style='color:green'>+        if ( x + ancho / 2 <= 0 && aceleracionX < 0){</p><p style='color:green'>+            estado = Estados.INACTIVO;</p><p style='color:green'>+        }</p><p style='color:green'>+</p><p style='color:green'>+        x = x + aceleracionX;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public void destruir() {</p><p style='color:green'>+        estado = Estados.EXPLOTANDO;</p><p style='color:green'>+        sprite = sprites.get(EXPLOTAR);</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public boolean colisiona(Modelo modelo) {</p><p style='color:green'>+</p><p style='color:green'>+        boolean colisiona = false;</p><p style='color:green'>+</p><p style='color:green'>+        if (modelo.getX() - modelo.getAncho() / 2 <= (x + ancho / 2)</p><p style='color:green'>+                && (modelo.getX() + modelo.getAncho() / 2) >= (x - ancho / 2)</p><p style='color:green'>+                && (y + altura / 2) >= (modelo.getY() - modelo.getAltura() / 2)</p><p style='color:green'>+                && (y - altura / 2) < (modelo.getY() + modelo.getAltura() / 2)) {</p><p style='color:green'>+            colisiona = true;</p><p style='color:green'>+        }</p><p style='color:green'>+        return colisiona;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public int estaEnPantalla() {</p><p style='color:green'>+        if ( y + altura/2 < 0){</p><p style='color:green'>+            return 0;</p><p style='color:green'>+        } if ( y + altura/2 >= 0 && y - altura/2 < mCanvasAltura){</p><p style='color:green'>+            return 1;</p><p style='color:green'>+        }</p><p style='color:green'>+        return -1;</p><p style='color:green'>+    }</p><p style='color:green'>+}</p>diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.javaindex e8f6adb..4672b33 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java</p>@@ -73,10 +73,10 @@ public class DianaFacil extends Diana {         }          if (x + ancho / 2 >= mCanvasAncho ){<p style='color:red'>-            aceleracionX = (float) (0.5 + Math.random()*2.5 * -1);</p><p style='color:green'>+            aceleracionX = (float) (3 * -1);</p>         }         if ( x - ancho / 2 <= 0){<p style='color:red'>-            aceleracionX = (float) (0.5 + Math.random()*2.5);</p><p style='color:green'>+            aceleracionX = (float) (3);</p>         }          x = x + aceleracionX;diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaJefe.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaJefe.javanew file mode 100644index 0000000..28b9016<p style='color:red'>--- /dev/null</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaJefe.java</p>@@ -0,0 +1,112 @@<p style='color:green'>+package es.uniovi.balbuena.juegodianas.modelos;</p><p style='color:green'>+</p><p style='color:green'>+import android.content.Context;</p><p style='color:green'>+import android.graphics.BitmapFactory;</p><p style='color:green'>+import android.graphics.Canvas;</p><p style='color:green'>+</p><p style='color:green'>+import java.util.HashMap;</p><p style='color:green'>+</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.R;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.global.Estados;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.graficos.Sprite;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.utilidades.Ar;</p><p style='color:green'>+</p><p style='color:green'>+/**</p><p style='color:green'>+ * Created by Balbuena on 15/12/2017.</p><p style='color:green'>+ */</p><p style='color:green'>+</p><p style='color:green'>+public class DianaJefe extends Diana {</p><p style='color:green'>+</p><p style='color:green'>+    public static final String BASICO = "basico";</p><p style='color:green'>+    public static final String EXPLOTAR = "Explotar";</p><p style='color:green'>+</p><p style='color:green'>+    private Sprite sprite;</p><p style='color:green'>+    private HashMap<String,Sprite> sprites = new HashMap<String,Sprite> ();</p><p style='color:green'>+</p><p style='color:green'>+</p><p style='color:green'>+    public DianaJefe(Context context, double x, double y) {</p><p style='color:green'>+        super(context, x, y);</p><p style='color:green'>+        altura = Ar.altura(40);</p><p style='color:green'>+        ancho = Ar.ancho(40);</p><p style='color:green'>+</p><p style='color:green'>+        //puntuacion</p><p style='color:green'>+        setPuntuacion(10);</p><p style='color:green'>+</p><p style='color:green'>+        imagen = context.getResources().getDrawable(R.drawable.diana3);</p><p style='color:green'>+</p><p style='color:green'>+        Sprite basico = new Sprite(BitmapFactory.decodeResource(</p><p style='color:green'>+                context.getResources(), R.drawable.diana3), ancho, altura, 1, 1, false);</p><p style='color:green'>+        sprites.put(BASICO, basico);</p><p style='color:green'>+</p><p style='color:green'>+        Sprite explotar = new Sprite(BitmapFactory.decodeResource(</p><p style='color:green'>+                context.getResources(), R.drawable.animacion_enemigo_explotar), ancho, altura, 6, 6, false);</p><p style='color:green'>+        sprites.put(EXPLOTAR, explotar);</p><p style='color:green'>+</p><p style='color:green'>+        sprite = basico;</p><p style='color:green'>+</p><p style='color:green'>+        aceleracionX = 10;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public void dibujarEnPantalla(Canvas canvas) {</p><p style='color:green'>+        if(estado != Estados.INACTIVO) {</p><p style='color:green'>+            int yArriba = (int) y - altura / 2;</p><p style='color:green'>+            int xIzquierda = (int) x - ancho / 2;</p><p style='color:green'>+</p><p style='color:green'>+            imagen.setBounds(xIzquierda, yArriba, xIzquierda</p><p style='color:green'>+                    + ancho, yArriba + altura);</p><p style='color:green'>+            imagen.draw(canvas);</p><p style='color:green'>+        }</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public void moverAutomaticamente() {</p><p style='color:green'>+</p><p style='color:green'>+        boolean finalizaSprite = sprite.actualizar(System.currentTimeMillis());</p><p style='color:green'>+</p><p style='color:green'>+        if (sprite == sprites.get(EXPLOTAR) && finalizaSprite) {</p><p style='color:green'>+            imagen = null;</p><p style='color:green'>+            //sprite = sprites.get(EXPLOTAR);</p><p style='color:green'>+            estado = Estados.INACTIVO;</p><p style='color:green'>+        }</p><p style='color:green'>+</p><p style='color:green'>+        if (x + ancho / 2 >= mCanvasAncho ){</p><p style='color:green'>+            aceleracionX = (float) (10 * -1);</p><p style='color:green'>+        }</p><p style='color:green'>+        if ( x - ancho / 2 <= 0){</p><p style='color:green'>+            aceleracionX = (float) (0.5 + Math.random()*10);</p><p style='color:green'>+        }</p><p style='color:green'>+</p><p style='color:green'>+        x = x + aceleracionX;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public void destruir() {</p><p style='color:green'>+        estado = Estados.EXPLOTANDO;</p><p style='color:green'>+        sprite = sprites.get(EXPLOTAR);</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public boolean colisiona(Modelo modelo) {</p><p style='color:green'>+</p><p style='color:green'>+        boolean colisiona = false;</p><p style='color:green'>+</p><p style='color:green'>+        if (modelo.getX() - modelo.getAncho() / 2 <= (x + ancho / 2)</p><p style='color:green'>+                && (modelo.getX() + modelo.getAncho() / 2) >= (x - ancho / 2)</p><p style='color:green'>+                && (y + altura / 2) >= (modelo.getY() - modelo.getAltura() / 2)</p><p style='color:green'>+                && (y - altura / 2) < (modelo.getY() + modelo.getAltura() / 2)) {</p><p style='color:green'>+            colisiona = true;</p><p style='color:green'>+        }</p><p style='color:green'>+        return colisiona;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public int estaEnPantalla() {</p><p style='color:green'>+        if ( y + altura/2 < 0){</p><p style='color:green'>+            return 0;</p><p style='color:green'>+        } if ( y + altura/2 >= 0 && y - altura/2 < mCanvasAltura){</p><p style='color:green'>+            return 1;</p><p style='color:green'>+        }</p><p style='color:green'>+        return -1;</p><p style='color:green'>+    }</p><p style='color:green'>+}</p>diff --git a/app/src/main/res/drawable/boton_jugar.png b/app/src/main/res/drawable/boton_jugar.pngnew file mode 100644index 0000000..e737f48Binary files /dev/null and b/app/src/main/res/drawable/boton_jugar.png differdiff --git a/app/src/main/res/drawable/menu_titulo.png b/app/src/main/res/drawable/menu_titulo.pngnew file mode 100644index 0000000..8ecae8bBinary files /dev/null and b/app/src/main/res/drawable/menu_titulo.png differdiff --git a/app/src/main/res/layout/activity_menu.xml b/app/src/main/res/layout/activity_menu.xmlnew file mode 100644index 0000000..804f672<p style='color:red'>--- /dev/null</p><p style='color:green'>+++ b/app/src/main/res/layout/activity_menu.xml</p>@@ -0,0 +1,19 @@<p style='color:green'>+<?xml version="1.0" encoding="utf-8"?></p><p style='color:green'>+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"</p><p style='color:green'>+    xmlns:tools="http://schemas.android.com/tools"</p><p style='color:green'>+    android:layout_width="match_parent"</p><p style='color:green'>+    android:layout_height="match_parent"</p><p style='color:green'>+    android:paddingBottom="16dp"</p><p style='color:green'>+    android:paddingLeft="16dp"</p><p style='color:green'>+    android:paddingRight="16dp"</p><p style='color:green'>+    android:paddingTop="16dp"</p><p style='color:green'>+    tools:context="es.uniovi.balbuena.juegodianas.MenuActivity"</p><p style='color:green'>+    android:background="@drawable/menu_titulo"></p><p style='color:green'>+</p><p style='color:green'>+    <ImageButton</p><p style='color:green'>+        android:layout_width="wrap_content"</p><p style='color:green'>+        android:layout_height="wrap_content"</p><p style='color:green'>+        android:id="@+id/imageButton"</p><p style='color:green'>+        android:layout_gravity="center"</p><p style='color:green'>+        android:background="@drawable/boton_jugar" /></p><p style='color:green'>+</FrameLayout></p>diff --git a/app/src/main/res/raw/level1.xml b/app/src/main/res/raw/level1.xmlindex da9f7b8..3af4c70 100644<p style='color:red'>--- a/app/src/main/res/raw/level1.xml</p><p style='color:green'>+++ b/app/src/main/res/raw/level1.xml</p>@@ -5,14 +5,14 @@             <x>100</x>             <y>75</y>         </dianaF><p style='color:red'>-        <dianaF></p><p style='color:red'>-            <x>200</x></p><p style='color:red'>-            <y>150</y></p><p style='color:red'>-        </dianaF></p><p style='color:red'>-        <dianaF></p><p style='color:green'>+        <dianaE></p>             <x>-100</x><p style='color:green'>+            <y>150</y></p><p style='color:green'>+        </dianaE></p><p style='color:green'>+        <dianaJ></p><p style='color:green'>+            <x>140</x></p>             <y>225</y><p style='color:red'>-        </dianaF></p><p style='color:green'>+        </dianaJ></p>     </enemies> </level> commit ea55826a924597296fa78149e80b94b434d13426Author: soynombrecap <pbalbuena13@gmail.com>Date:   Fri Dec 15 16:01:37 2017 +0100    Obstaculo facil, obstaculo irrompible, power up para romper los irrompibles y power up para doblar puntuacion 13 files changed, 221 insertions(+), 11 deletions(-)diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.javaindex f77d868..02d8174 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p>@@ -15,6 +15,9 @@ import es.uniovi.balbuena.juegodianas.modelos.Cannon; import es.uniovi.balbuena.juegodianas.modelos.Diana; import es.uniovi.balbuena.juegodianas.modelos.DianaFacil; import es.uniovi.balbuena.juegodianas.modelos.DisparoCannon;<p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.Obstaculo;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.ObstaculoFacil;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.ObstaculoIrrompible;</p> import es.uniovi.balbuena.juegodianas.modelos.PowerUp; import es.uniovi.balbuena.juegodianas.modelos.controles.Marcador; import es.uniovi.balbuena.juegodianas.modelos.escenario.Fondo;@@ -45,8 +48,12 @@ public class GameView extends View {     private Cannon cannon;     private Marcador marcador;     private List<Diana> dianas;<p style='color:green'>+    private List<Obstaculo> obstaculos;</p>     private List<DisparoCannon> disparoCannons;<p style='color:green'>+    private List<PowerUp> powerUps;</p>     private boolean finJuego;<p style='color:green'>+    private boolean isPowerUpAtaque;</p><p style='color:green'>+    private boolean isPowerUpPuntuacion;</p>      public GameView(Context context) {         super(context);@@ -56,16 +63,29 @@ public class GameView extends View {     }      private void inicializar(Context context) {<p style='color:green'>+        isPowerUpAtaque = false;</p><p style='color:green'>+        isPowerUpPuntuacion=false;</p><p style='color:green'>+</p>          fondo = new Fondo (context, Ar.x(320/2), Ar.y(480/2));         cannon = new Cannon(context,  Ar.x(320/2), Ar.y(390));         Diana d = new DianaFacil(context, Ar.x(50), Ar.y(50));<p style='color:red'>-        marcador = new Marcador(context, Ar.x(250), Ar.y(410));</p><p style='color:green'>+        marcador = new Marcador(context, Ar.x(30), Ar.y(30));</p><p style='color:green'>+        ObstaculoFacil obstaculoFacil = new ObstaculoFacil(context, Ar.x(50), Ar.y(250));</p><p style='color:green'>+        ObstaculoIrrompible obstaculoIrrompible = new ObstaculoIrrompible(context, Ar.x(250), Ar.y(150));</p><p style='color:green'>+</p>          disparoCannons = new LinkedList<DisparoCannon>();<p style='color:green'>+</p>         dianas = new LinkedList<Diana>();         dianas.add(d); <p style='color:green'>+        obstaculos = new LinkedList<Obstaculo>();</p><p style='color:green'>+        obstaculos.add(obstaculoFacil);</p><p style='color:green'>+        obstaculos.add(obstaculoIrrompible);</p><p style='color:green'>+</p><p style='color:green'>+        powerUps = new LinkedList<PowerUp>();</p><p style='color:green'>+</p>         // Bucle del Juego.         gameloop = new GameLoop();         gameloop.start();@@ -86,6 +106,10 @@ public class GameView extends View {                     ) {                 disparos.dibujarEnPantalla(canvas);             }<p style='color:green'>+            for (Obstaculo obstaculo : obstaculos</p><p style='color:green'>+                 ) {</p><p style='color:green'>+                obstaculo.dibujarEnPantalla(canvas);</p><p style='color:green'>+            }</p>          }catch (Exception e){ @@ -96,6 +120,7 @@ public class GameView extends View {         Diana dianaSacarLista = null;         DisparoCannon disparoSacarLista = null;         PowerUp powerUpSacarLista = null;<p style='color:green'>+        Obstaculo obstaculoSacarLista = null;</p>          for (Diana d: dianas              ) {@@ -111,8 +136,35 @@ public class GameView extends View {                         && d.colisiona(disparoCannon1) && d.estado == Estados.ACTIVO) {                      d.destruir();<p style='color:green'>+</p>                     marcador.setPuntos(marcador.getPuntos() + d.getPuntuacion());<p style='color:green'>+                    if(isPowerUpPuntuacion){ //si ha cogido un powerUp, se dobla la puntuacion</p><p style='color:green'>+                        marcador.setPuntos(marcador.getPuntos() + d.getPuntuacion());</p><p style='color:green'>+                    }</p><p style='color:green'>+</p><p style='color:green'>+                    disparoSacarLista = disparoCannon1;</p><p style='color:green'>+                }</p><p style='color:green'>+                if (disparoCannon1.estaEnPantalla() != 1) {</p><p style='color:green'>+                    disparoSacarLista = disparoCannon1;</p><p style='color:green'>+                }</p><p style='color:green'>+            }</p><p style='color:green'>+        }</p><p style='color:green'>+        for (Obstaculo o : obstaculos</p><p style='color:green'>+             ) {</p><p style='color:green'>+            if (o.estaEnPantalla() == -1 || o.estado == Estados.INACTIVO) {</p><p style='color:green'>+                obstaculoSacarLista  = o;</p><p style='color:green'>+            }</p> <p style='color:green'>+            for (DisparoCannon disparoCannon1 : disparoCannons) {</p><p style='color:green'>+</p><p style='color:green'>+                if (o.estaEnPantalla() == 1</p><p style='color:green'>+                        && o.colisiona(disparoCannon1) && o.estado == Estados.ACTIVO) {</p><p style='color:green'>+</p><p style='color:green'>+                    o.destruir();</p><p style='color:green'>+                    if(isPowerUpAtaque){</p><p style='color:green'>+                        o.estado = Estados.INACTIVO;</p><p style='color:green'>+                        o.setImagen(null);</p><p style='color:green'>+                    }</p>                     disparoSacarLista = disparoCannon1;                 }                 if (disparoCannon1.estaEnPantalla() != 1) {@@ -128,6 +180,11 @@ public class GameView extends View {         if(disparoSacarLista != null){             disparoCannons.remove(disparoSacarLista);         }<p style='color:green'>+        if(obstaculoSacarLista != null){</p><p style='color:green'>+            obstaculos.remove(obstaculoSacarLista);</p><p style='color:green'>+        }</p><p style='color:green'>+</p><p style='color:green'>+</p>       }diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.javaindex 1526109..e8f6adb 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java</p>@@ -44,7 +44,7 @@ public class DianaFacil extends Diana {                 context.getResources(), R.drawable.animacion_enemigo_explotar), ancho, altura, 6, 6, false);         sprites.put(EXPLOTAR, explotar); <p style='color:red'>-        sprite = explotar;</p><p style='color:green'>+        sprite = basico;</p>          aceleracionX = 3;     }@@ -67,6 +67,8 @@ public class DianaFacil extends Diana {         boolean finalizaSprite = sprite.actualizar(System.currentTimeMillis());          if (sprite == sprites.get(EXPLOTAR) && finalizaSprite) {<p style='color:green'>+            imagen = null;</p><p style='color:green'>+            //sprite = sprites.get(EXPLOTAR);</p>             estado = Estados.INACTIVO;         } diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Modelo.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Modelo.javaindex c7a76a5..4316753 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Modelo.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Modelo.java</p>@@ -23,6 +23,14 @@ public class Modelo {     protected int ancho;     protected Drawable imagen; <p style='color:green'>+    public Drawable getImagen() {</p><p style='color:green'>+        return imagen;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public void setImagen(Drawable imagen) {</p><p style='color:green'>+        this.imagen = imagen;</p><p style='color:green'>+    }</p><p style='color:green'>+</p>     public Modelo(Context context, double x, double y){         this.context = context;         this.x = x;diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/ObstaculoFacil.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/ObstaculoFacil.javaindex d96a1c6..7e19d23 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/ObstaculoFacil.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/ObstaculoFacil.java</p>@@ -3,6 +3,10 @@ package es.uniovi.balbuena.juegodianas.modelos; import android.content.Context; import android.graphics.Canvas; <p style='color:green'>+import es.uniovi.balbuena.juegodianas.R;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.global.Estados;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.utilidades.Ar;</p><p style='color:green'>+</p> /**  * Created by Balbuena on 08/12/2017.  */@@ -10,11 +14,21 @@ import android.graphics.Canvas; public class ObstaculoFacil extends Obstaculo {     public ObstaculoFacil(Context context, double x, double y) {         super(context, x, y);<p style='color:green'>+        altura = Ar.altura(20);</p><p style='color:green'>+        ancho = Ar.ancho(100);</p><p style='color:green'>+        imagen = context.getResources().getDrawable(R.drawable.ladrillo);</p>     }      @Override     public void dibujarEnPantalla(Canvas canvas) {<p style='color:green'>+        if(estado != Estados.INACTIVO) {</p><p style='color:green'>+            int yArriba = (int) y - altura / 2;</p><p style='color:green'>+            int xIzquierda = (int) x - ancho / 2;</p> <p style='color:green'>+            imagen.setBounds(xIzquierda, yArriba, xIzquierda</p><p style='color:green'>+                    + ancho, yArriba + altura);</p><p style='color:green'>+            imagen.draw(canvas);</p><p style='color:green'>+        }</p>     }      @Override@@ -24,16 +38,30 @@ public class ObstaculoFacil extends Obstaculo {      @Override     public void destruir() {<p style='color:red'>-</p><p style='color:green'>+        imagen = null;</p><p style='color:green'>+        estado = Estados.INACTIVO;</p>     }      @Override     public boolean colisiona(Modelo modelo) {<p style='color:red'>-        return false;</p><p style='color:green'>+        boolean colisiona = false;</p><p style='color:green'>+</p><p style='color:green'>+        if (modelo.getX() - modelo.getAncho() / 2 <= (x + ancho / 2)</p><p style='color:green'>+                && (modelo.getX() + modelo.getAncho() / 2) >= (x - ancho / 2)</p><p style='color:green'>+                && (y + altura / 2) >= (modelo.getY() - modelo.getAltura() / 2)</p><p style='color:green'>+                && (y - altura / 2) < (modelo.getY() + modelo.getAltura() / 2)) {</p><p style='color:green'>+            colisiona = true;</p><p style='color:green'>+        }</p><p style='color:green'>+        return colisiona;</p>     }      @Override     public int estaEnPantalla() {<p style='color:red'>-        return 0;</p><p style='color:green'>+        if ( y + altura/2 < 0){</p><p style='color:green'>+            return 0;</p><p style='color:green'>+        } if ( y + altura/2 >= 0 && y - altura/2 < mCanvasAltura){</p><p style='color:green'>+            return 1;</p><p style='color:green'>+        }</p><p style='color:green'>+        return -1;</p>     } }diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/ObstaculoIrrompible.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/ObstaculoIrrompible.javanew file mode 100644index 0000000..4c29627<p style='color:red'>--- /dev/null</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/ObstaculoIrrompible.java</p>@@ -0,0 +1,70 @@<p style='color:green'>+package es.uniovi.balbuena.juegodianas.modelos;</p><p style='color:green'>+</p><p style='color:green'>+import android.content.Context;</p><p style='color:green'>+import android.graphics.Canvas;</p><p style='color:green'>+</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.R;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.global.Estados;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.utilidades.Ar;</p><p style='color:green'>+</p><p style='color:green'>+/**</p><p style='color:green'>+ * Created by Balbuena on 15/12/2017.</p><p style='color:green'>+ */</p><p style='color:green'>+</p><p style='color:green'>+public class ObstaculoIrrompible extends Obstaculo {</p><p style='color:green'>+    public ObstaculoIrrompible(Context context, double x, double y) {</p><p style='color:green'>+        super(context, x, y);</p><p style='color:green'>+        altura = Ar.altura(20);</p><p style='color:green'>+        ancho = Ar.ancho(100);</p><p style='color:green'>+        imagen = context.getResources().getDrawable(R.drawable.ladrillo1);</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public void dibujarEnPantalla(Canvas canvas) {</p><p style='color:green'>+        if(estado != Estados.INACTIVO) {</p><p style='color:green'>+            int yArriba = (int) y - altura / 2;</p><p style='color:green'>+            int xIzquierda = (int) x - ancho / 2;</p><p style='color:green'>+</p><p style='color:green'>+            imagen.setBounds(xIzquierda, yArriba, xIzquierda</p><p style='color:green'>+                    + ancho, yArriba + altura);</p><p style='color:green'>+            imagen.draw(canvas);</p><p style='color:green'>+        }</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public void moverAutomaticamente() {</p><p style='color:green'>+</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public void destruir() {</p><p style='color:green'>+</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public void destruirIrrompible() {</p><p style='color:green'>+        imagen = null;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public boolean colisiona(Modelo modelo) {</p><p style='color:green'>+        boolean colisiona = false;</p><p style='color:green'>+</p><p style='color:green'>+        if (modelo.getX() - modelo.getAncho() / 2 <= (x + ancho / 2)</p><p style='color:green'>+                && (modelo.getX() + modelo.getAncho() / 2) >= (x - ancho / 2)</p><p style='color:green'>+                && (y + altura / 2) >= (modelo.getY() - modelo.getAltura() / 2)</p><p style='color:green'>+                && (y - altura / 2) < (modelo.getY() + modelo.getAltura() / 2)) {</p><p style='color:green'>+            colisiona = true;</p><p style='color:green'>+        }</p><p style='color:green'>+        return colisiona;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public int estaEnPantalla() {</p><p style='color:green'>+        if ( y + altura/2 < 0){</p><p style='color:green'>+            return 0;</p><p style='color:green'>+        } if ( y + altura/2 >= 0 && y - altura/2 < mCanvasAltura){</p><p style='color:green'>+            return 1;</p><p style='color:green'>+        }</p><p style='color:green'>+        return -1;</p><p style='color:green'>+    }</p><p style='color:green'>+}</p>diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/PowerUp.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/PowerUp.javaindex 9e0781e..01017d6 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/PowerUp.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/PowerUp.java</p>@@ -3,6 +3,8 @@ package es.uniovi.balbuena.juegodianas.modelos; import android.content.Context; import android.graphics.Canvas; <p style='color:green'>+import es.uniovi.balbuena.juegodianas.global.Estados;</p><p style='color:green'>+</p> /**  * Created by Balbuena on 08/12/2017.  */@@ -10,6 +12,7 @@ import android.graphics.Canvas; public abstract class PowerUp extends Modelo {      public float aceleracionY;<p style='color:green'>+    public  int estado = Estados.ACTIVO;</p>      public PowerUp(Context context, double x, double y) { diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/PowerUpAtaque.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/PowerUpAtaque.javaindex 1328e76..8862d25 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/PowerUpAtaque.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/PowerUpAtaque.java</p>@@ -3,23 +3,45 @@ package es.uniovi.balbuena.juegodianas.modelos; import android.content.Context; import android.graphics.Canvas; <p style='color:green'>+import es.uniovi.balbuena.juegodianas.R;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.global.Estados;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.utilidades.Ar;</p><p style='color:green'>+</p> /**  * Created by Balbuena on 08/12/2017.  */  public class PowerUpAtaque extends PowerUp {<p style='color:green'>+</p><p style='color:green'>+</p><p style='color:green'>+</p>     public PowerUpAtaque(Context context, double x, double y) {         super(context, x, y);<p style='color:green'>+        altura = Ar.altura(20);</p><p style='color:green'>+        ancho = Ar.ancho(20);</p><p style='color:green'>+        imagen = context.getResources().getDrawable(R.drawable.florpowerup);</p>     }      @Override     public void dibujarEnPantalla(Canvas canvas) {<p style='color:red'>-</p><p style='color:green'>+        if(estado != Estados.INACTIVO) {</p><p style='color:green'>+            int yArriba = (int) y - altura / 2;</p><p style='color:green'>+            int xIzquierda = (int) x - ancho / 2;</p><p style='color:green'>+</p><p style='color:green'>+            imagen.setBounds(xIzquierda, yArriba, xIzquierda</p><p style='color:green'>+                    + ancho, yArriba + altura);</p><p style='color:green'>+            imagen.draw(canvas);</p><p style='color:green'>+        }</p>     }      @Override     public int estaEnPantalla() {<p style='color:red'>-        return 0;</p><p style='color:green'>+        if ( y - altura/2 < 0){</p><p style='color:green'>+            return 0;</p><p style='color:green'>+        } if ( y - altura/2 >= 0 && y + altura/2 < mCanvasAltura){</p><p style='color:green'>+            return 1;</p><p style='color:green'>+        }</p><p style='color:green'>+        return -1;</p>     }      @Overridediff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/PowerUpPuntuacion.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/PowerUpPuntuacion.javaindex f86ae87..311b48e 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/PowerUpPuntuacion.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/PowerUpPuntuacion.java</p>@@ -3,6 +3,10 @@ package es.uniovi.balbuena.juegodianas.modelos; import android.content.Context; import android.graphics.Canvas; <p style='color:green'>+import es.uniovi.balbuena.juegodianas.R;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.global.Estados;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.utilidades.Ar;</p><p style='color:green'>+</p> /**  * Created by Balbuena on 08/12/2017.  */@@ -10,16 +14,31 @@ import android.graphics.Canvas; public class PowerUpPuntuacion extends PowerUp {     public PowerUpPuntuacion(Context context, double x, double y) {         super(context, x, y);<p style='color:green'>+        altura = Ar.altura(20);</p><p style='color:green'>+        ancho = Ar.ancho(20);</p><p style='color:green'>+        imagen = context.getResources().getDrawable(R.drawable.florpowerup);</p>     }      @Override     public void dibujarEnPantalla(Canvas canvas) {<p style='color:red'>-</p><p style='color:green'>+        if(estado != Estados.INACTIVO) {</p><p style='color:green'>+            int yArriba = (int) y - altura / 2;</p><p style='color:green'>+            int xIzquierda = (int) x - ancho / 2;</p><p style='color:green'>+</p><p style='color:green'>+            imagen.setBounds(xIzquierda, yArriba, xIzquierda</p><p style='color:green'>+                    + ancho, yArriba + altura);</p><p style='color:green'>+            imagen.draw(canvas);</p><p style='color:green'>+        }</p>     }      @Override     public int estaEnPantalla() {<p style='color:red'>-        return 0;</p><p style='color:green'>+        if ( y - altura/2 < 0){</p><p style='color:green'>+            return 0;</p><p style='color:green'>+        } if ( y - altura/2 >= 0 && y + altura/2 < mCanvasAltura){</p><p style='color:green'>+            return 1;</p><p style='color:green'>+        }</p><p style='color:green'>+        return -1;</p>     }      @Overridediff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/controles/Marcador.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/controles/Marcador.javaindex 83c0050..2761c04 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/controles/Marcador.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/controles/Marcador.java</p>@@ -32,9 +32,10 @@ public class Marcador extends Modelo {     @Override     public void dibujarEnPantalla(Canvas canvas){         Paint paint = new Paint();<p style='color:red'>-        paint.setColor(Color.WHITE);</p><p style='color:green'>+        paint.setColor(Color.BLACK);</p>         paint.setAntiAlias(true);<p style='color:red'>-        paint.setTextSize(20);</p><p style='color:green'>+        paint.setTextSize(40);</p><p style='color:green'>+        paint.setFakeBoldText(true);</p>         canvas.drawText(String.valueOf(puntos), (int)x, (int)y, paint);     } }diff --git a/app/src/main/res/drawable/florpowerup.png b/app/src/main/res/drawable/florpowerup.pngnew file mode 100644index 0000000..5a5711cBinary files /dev/null and b/app/src/main/res/drawable/florpowerup.png differdiff --git a/app/src/main/res/drawable/ladrillo.png b/app/src/main/res/drawable/ladrillo.pngnew file mode 100644index 0000000..d98604bBinary files /dev/null and b/app/src/main/res/drawable/ladrillo.png differdiff --git a/app/src/main/res/drawable/ladrillo1.png b/app/src/main/res/drawable/ladrillo1.pngnew file mode 100644index 0000000..326b007Binary files /dev/null and b/app/src/main/res/drawable/ladrillo1.png differdiff --git a/app/src/main/res/drawable/supermario.png b/app/src/main/res/drawable/supermario.pngnew file mode 100644index 0000000..6bffa3aBinary files /dev/null and b/app/src/main/res/drawable/supermario.png differcommit 1826a8642e38a2007ceca779bfe586aff4abadddAuthor: soynombrecap <pbalbuena13@gmail.com>Date:   Fri Dec 15 13:40:46 2017 +0100    Colisiones ok. Diana error de inactividad 2 files changed, 42 insertions(+), 14 deletions(-)diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.javaindex e3fc02d..f77d868 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p>@@ -46,6 +46,7 @@ public class GameView extends View {     private Marcador marcador;     private List<Diana> dianas;     private List<DisparoCannon> disparoCannons;<p style='color:green'>+    private boolean finJuego;</p>      public GameView(Context context) {         super(context);@@ -58,8 +59,8 @@ public class GameView extends View {          fondo = new Fondo (context, Ar.x(320/2), Ar.y(480/2));         cannon = new Cannon(context,  Ar.x(320/2), Ar.y(390));<p style='color:red'>-        Diana d = new DianaFacil(context, 75, 75);</p><p style='color:red'>-        marcador = new Marcador(context, Ar.x(320/2 +30), Ar.y(390));</p><p style='color:green'>+        Diana d = new DianaFacil(context, Ar.x(50), Ar.y(50));</p><p style='color:green'>+        marcador = new Marcador(context, Ar.x(250), Ar.y(410));</p>          disparoCannons = new LinkedList<DisparoCannon>();         dianas = new LinkedList<Diana>();@@ -93,12 +94,14 @@ public class GameView extends View {      private void gl_comprobarColisiones(){         Diana dianaSacarLista = null;<p style='color:red'>-        DisparoCannon disparoCannon = null;</p><p style='color:green'>+        DisparoCannon disparoSacarLista = null;</p>         PowerUp powerUpSacarLista = null;          for (Diana d: dianas              ) {             if (d.estaEnPantalla() == -1 || d.estado == Estados.INACTIVO) {<p style='color:green'>+                Log.i("esta en pantalla?", " " + d.estaEnPantalla());</p><p style='color:green'>+                Log.i("esta en activo?", " " + d.estado);</p>                 dianaSacarLista  = d;             } @@ -110,17 +113,30 @@ public class GameView extends View {                     d.destruir();                     marcador.setPuntos(marcador.getPuntos() + d.getPuntuacion()); <p style='color:red'>-                    disparoCannon = disparoCannon1;</p><p style='color:green'>+                    disparoSacarLista = disparoCannon1;</p>                 }                 if (disparoCannon1.estaEnPantalla() != 1) {<p style='color:red'>-                    disparoCannon = disparoCannon1;</p><p style='color:green'>+                    disparoSacarLista = disparoCannon1;</p>                 }             }         }<p style='color:green'>+</p><p style='color:green'>+        //sacar de las listas</p><p style='color:green'>+        if(dianaSacarLista != null){</p><p style='color:green'>+            dianas.remove(dianaSacarLista);</p><p style='color:green'>+        }</p><p style='color:green'>+        if(disparoSacarLista != null){</p><p style='color:green'>+            disparoCannons.remove(disparoSacarLista);</p><p style='color:green'>+        }</p><p style='color:green'>+</p><p style='color:green'>+</p>     }      private void gl_comprobarNivelFinalizado(){<p style='color:red'>-</p><p style='color:green'>+        if(dianas.size() == 0){</p><p style='color:green'>+            finJuego = true;</p><p style='color:green'>+            ((MainActivity) context).finish();</p><p style='color:green'>+        }</p>     }      private void gl_moverElementos(){@@ -131,11 +147,12 @@ public class GameView extends View {         for (Diana d : dianas              ) {             d.moverAutomaticamente();<p style='color:green'>+            Log.i("coord disparo x y", d.getX() + " " + d.getY());</p>         }         for (DisparoCannon disparos : disparoCannons                 ) {             disparos.moverAutomaticamente();<p style='color:red'>-            Log.i("coord disparo x y", disparos.getX() + " " + disparos.getY());</p><p style='color:green'>+</p>         }     } diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.javaindex f6e4c00..1526109 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java</p>@@ -46,17 +46,19 @@ public class DianaFacil extends Diana {          sprite = explotar; <p style='color:red'>-        aceleracionX = 10;</p><p style='color:green'>+        aceleracionX = 3;</p>     }      @Override     public void dibujarEnPantalla(Canvas canvas) {<p style='color:red'>-        int yArriba = (int)  y - altura / 2;</p><p style='color:red'>-        int xIzquierda = (int) x - ancho / 2;</p><p style='color:green'>+        if(estado != Estados.INACTIVO) {</p><p style='color:green'>+            int yArriba = (int) y - altura / 2;</p><p style='color:green'>+            int xIzquierda = (int) x - ancho / 2;</p> <p style='color:red'>-        imagen.setBounds(xIzquierda, yArriba, xIzquierda</p><p style='color:red'>-                + ancho, yArriba + altura);</p><p style='color:red'>-        imagen.draw(canvas);</p><p style='color:green'>+            imagen.setBounds(xIzquierda, yArriba, xIzquierda</p><p style='color:green'>+                    + ancho, yArriba + altura);</p><p style='color:green'>+            imagen.draw(canvas);</p><p style='color:green'>+        }</p>     }      @Override@@ -86,7 +88,16 @@ public class DianaFacil extends Diana {      @Override     public boolean colisiona(Modelo modelo) {<p style='color:red'>-        return false;</p><p style='color:green'>+</p><p style='color:green'>+        boolean colisiona = false;</p><p style='color:green'>+</p><p style='color:green'>+        if (modelo.getX() - modelo.getAncho() / 2 <= (x + ancho / 2)</p><p style='color:green'>+                && (modelo.getX() + modelo.getAncho() / 2) >= (x - ancho / 2)</p><p style='color:green'>+                && (y + altura / 2) >= (modelo.getY() - modelo.getAltura() / 2)</p><p style='color:green'>+                && (y - altura / 2) < (modelo.getY() + modelo.getAltura() / 2)) {</p><p style='color:green'>+            colisiona = true;</p><p style='color:green'>+        }</p><p style='color:green'>+        return colisiona;</p>     }      @Overridecommit e21dc63468a4fd0ab078a5030032b2edb22ad806Author: soynombrecap <pbalbuena13@gmail.com>Date:   Fri Dec 15 03:16:29 2017 +0100    marcador a√±adido 4 files changed, 91 insertions(+), 2 deletions(-)diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.javaindex 8973f39..e3fc02d 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p>@@ -10,10 +10,13 @@ import java.util.LinkedList; import java.util.List; import java.util.concurrent.TimeUnit; <p style='color:green'>+import es.uniovi.balbuena.juegodianas.global.Estados;</p> import es.uniovi.balbuena.juegodianas.modelos.Cannon; import es.uniovi.balbuena.juegodianas.modelos.Diana; import es.uniovi.balbuena.juegodianas.modelos.DianaFacil; import es.uniovi.balbuena.juegodianas.modelos.DisparoCannon;<p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.PowerUp;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.controles.Marcador;</p> import es.uniovi.balbuena.juegodianas.modelos.escenario.Fondo; import es.uniovi.balbuena.juegodianas.modelos.utilidades.Ar; @@ -40,6 +43,7 @@ public class GameView extends View {      private Fondo fondo;     private Cannon cannon;<p style='color:green'>+    private Marcador marcador;</p>     private List<Diana> dianas;     private List<DisparoCannon> disparoCannons; @@ -55,6 +59,7 @@ public class GameView extends View {         fondo = new Fondo (context, Ar.x(320/2), Ar.y(480/2));         cannon = new Cannon(context,  Ar.x(320/2), Ar.y(390));         Diana d = new DianaFacil(context, 75, 75);<p style='color:green'>+        marcador = new Marcador(context, Ar.x(320/2 +30), Ar.y(390));</p>          disparoCannons = new LinkedList<DisparoCannon>();         dianas = new LinkedList<Diana>();@@ -71,6 +76,7 @@ public class GameView extends View {         try {             fondo.dibujarEnPantalla(canvas);             cannon.dibujarEnPantalla(canvas);<p style='color:green'>+            marcador.dibujarEnPantalla(canvas);</p>             for (Diana diana : dianas                  ) {                 diana.dibujarEnPantalla(canvas);@@ -86,7 +92,31 @@ public class GameView extends View {     }      private void gl_comprobarColisiones(){<p style='color:green'>+        Diana dianaSacarLista = null;</p><p style='color:green'>+        DisparoCannon disparoCannon = null;</p><p style='color:green'>+        PowerUp powerUpSacarLista = null;</p> <p style='color:green'>+        for (Diana d: dianas</p><p style='color:green'>+             ) {</p><p style='color:green'>+            if (d.estaEnPantalla() == -1 || d.estado == Estados.INACTIVO) {</p><p style='color:green'>+                dianaSacarLista  = d;</p><p style='color:green'>+            }</p><p style='color:green'>+</p><p style='color:green'>+            for (DisparoCannon disparoCannon1 : disparoCannons) {</p><p style='color:green'>+</p><p style='color:green'>+                if (d.estaEnPantalla() == 1</p><p style='color:green'>+                        && d.colisiona(disparoCannon1) && d.estado == Estados.ACTIVO) {</p><p style='color:green'>+</p><p style='color:green'>+                    d.destruir();</p><p style='color:green'>+                    marcador.setPuntos(marcador.getPuntos() + d.getPuntuacion());</p><p style='color:green'>+</p><p style='color:green'>+                    disparoCannon = disparoCannon1;</p><p style='color:green'>+                }</p><p style='color:green'>+                if (disparoCannon1.estaEnPantalla() != 1) {</p><p style='color:green'>+                    disparoCannon = disparoCannon1;</p><p style='color:green'>+                }</p><p style='color:green'>+            }</p><p style='color:green'>+        }</p>     }      private void gl_comprobarNivelFinalizado(){@@ -194,7 +224,7 @@ public class GameView extends View {                         gl_moverElementos();<p style='color:red'>-                  //  gl_comprobarColisiones();</p><p style='color:green'>+                      gl_comprobarColisiones();</p>                       // Re-dibujar onDraw(Canvas canvas)diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Diana.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Diana.javaindex 73f75df..45a0657 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Diana.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Diana.java</p>@@ -11,6 +11,30 @@ import es.uniovi.balbuena.juegodianas.global.Estados;  public abstract class Diana extends Modelo { <p style='color:green'>+    public int getPuntuacion() {</p><p style='color:green'>+        return puntuacion;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public void setPuntuacion(int puntuacion) {</p><p style='color:green'>+        this.puntuacion = puntuacion;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public float getAceleracionX() {</p><p style='color:green'>+        return aceleracionX;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public void setAceleracionX(float aceleracionX) {</p><p style='color:green'>+        this.aceleracionX = aceleracionX;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public float getAceleracionY() {</p><p style='color:green'>+        return aceleracionY;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public void setAceleracionY(float aceleracionY) {</p><p style='color:green'>+        this.aceleracionY = aceleracionY;</p><p style='color:green'>+    }</p><p style='color:green'>+</p>     private int puntuacion;      public float aceleracionX;diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.javaindex 3d41c30..f6e4c00 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java</p>@@ -31,6 +31,9 @@ public class DianaFacil extends Diana {         altura = Ar.altura(40);         ancho = Ar.ancho(40); <p style='color:green'>+        //puntuacion</p><p style='color:green'>+        setPuntuacion(1);</p><p style='color:green'>+</p>         imagen = context.getResources().getDrawable(R.drawable.diana1);          Sprite basico = new Sprite(BitmapFactory.decodeResource(diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/controles/Marcador.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/controles/Marcador.javaindex 4c7b5b4..83c0050 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/controles/Marcador.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/controles/Marcador.java</p>@@ -1,8 +1,40 @@ package es.uniovi.balbuena.juegodianas.modelos.controles; <p style='color:green'>+import android.content.Context;</p><p style='color:green'>+import android.graphics.Canvas;</p><p style='color:green'>+import android.graphics.Color;</p><p style='color:green'>+import android.graphics.Paint;</p><p style='color:green'>+</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.Modelo;</p><p style='color:green'>+</p> /**  * Created by Balbuena on 15/12/2017.  */ <p style='color:red'>-public class Marcador {</p><p style='color:green'>+public class Marcador extends Modelo {</p><p style='color:green'>+    int puntos;</p><p style='color:green'>+</p><p style='color:green'>+    public Marcador(Context context, double x, double y) {</p><p style='color:green'>+</p><p style='color:green'>+        super(context, x, y);</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public int getPuntos() {</p><p style='color:green'>+</p><p style='color:green'>+        return puntos;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public void setPuntos(int puntos) {</p><p style='color:green'>+</p><p style='color:green'>+        this.puntos = puntos;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public void dibujarEnPantalla(Canvas canvas){</p><p style='color:green'>+        Paint paint = new Paint();</p><p style='color:green'>+        paint.setColor(Color.WHITE);</p><p style='color:green'>+        paint.setAntiAlias(true);</p><p style='color:green'>+        paint.setTextSize(20);</p><p style='color:green'>+        canvas.drawText(String.valueOf(puntos), (int)x, (int)y, paint);</p><p style='color:green'>+    }</p> }commit f6db79ad7fd8dd64c3630c640a222c772dbc663bAuthor: soynombrecap <pbalbuena13@gmail.com>Date:   Fri Dec 15 03:14:03 2017 +0100    comprobar colisiones no funciona correctamente, debe revisarse 3 files changed, 11 insertions(+), 2 deletions(-)diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.javaindex eeebbe6..8973f39 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p>@@ -105,6 +105,7 @@ public class GameView extends View {         for (DisparoCannon disparos : disparoCannons                 ) {             disparos.moverAutomaticamente();<p style='color:green'>+            Log.i("coord disparo x y", disparos.getX() + " " + disparos.getY());</p>         }     } diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.javaindex 33ae92c..3d41c30 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DianaFacil.java</p>@@ -28,8 +28,8 @@ public class DianaFacil extends Diana {      public DianaFacil(Context context, double x, double y) {         super(context, x, y);<p style='color:red'>-        altura = Ar.altura(75);</p><p style='color:red'>-        ancho = Ar.ancho(75);</p><p style='color:green'>+        altura = Ar.altura(40);</p><p style='color:green'>+        ancho = Ar.ancho(40);</p>          imagen = context.getResources().getDrawable(R.drawable.diana1); diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/controles/Marcador.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/controles/Marcador.javanew file mode 100644index 0000000..4c7b5b4<p style='color:red'>--- /dev/null</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/controles/Marcador.java</p>@@ -0,0 +1,8 @@<p style='color:green'>+package es.uniovi.balbuena.juegodianas.modelos.controles;</p><p style='color:green'>+</p><p style='color:green'>+/**</p><p style='color:green'>+ * Created by Balbuena on 15/12/2017.</p><p style='color:green'>+ */</p><p style='color:green'>+</p><p style='color:green'>+public class Marcador {</p><p style='color:green'>+}</p>commit 71da17c6373661648227edc553902eec51de9080Author: soynombrecap <nfm_95@hotmail.com>Date:   Fri Dec 15 00:51:57 2017 +0100    Logica rebotes 3 files changed, 38 insertions(+), 16 deletions(-)diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.javaindex 9734f44..eeebbe6 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p>@@ -53,15 +53,13 @@ public class GameView extends View {     private void inicializar(Context context) {          fondo = new Fondo (context, Ar.x(320/2), Ar.y(480/2));<p style='color:red'>-        cannon = new Cannon(context,  Ar.x(320/2), Ar.y(350));</p><p style='color:green'>+        cannon = new Cannon(context,  Ar.x(320/2), Ar.y(390));</p>         Diana d = new DianaFacil(context, 75, 75);          disparoCannons = new LinkedList<DisparoCannon>();         dianas = new LinkedList<Diana>();         dianas.add(d); <p style='color:red'>-</p><p style='color:red'>-</p>         // Bucle del Juego.         gameloop = new GameLoop();         gameloop.start();@@ -175,9 +173,10 @@ public class GameView extends View {                                 aceleracionx = 0;                             }                             double y2 = y[i];<p style='color:red'>-                            Log.i("coord x y", x.toString() + " " + y.toString());</p><p style='color:red'>-                            double pendiente = (y2 - y1) / (x2 - x1);</p><p style='color:red'>-                            disparoCannons.add(cannon.disparar(pendiente, aceleracionx));</p><p style='color:green'>+                            //Log.i("coord x y", x.toString() + " " + y.toString());</p><p style='color:green'>+                            double pendiente = (y1 - y2) / (x1 - x2);</p><p style='color:green'>+                            double n = y1- (pendiente*x1);</p><p style='color:green'>+                            disparoCannons.add(cannon.disparar(pendiente, n,  aceleracionx));</p>                         }                     } diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Cannon.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Cannon.javaindex 345a0bc..18fac79 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Cannon.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Cannon.java</p>@@ -44,10 +44,10 @@ public class Cannon extends Modelo {         sprite = basico;     } <p style='color:red'>-    public DisparoCannon disparar(double pendiente, int acelx){</p><p style='color:green'>+    public DisparoCannon disparar(double pendiente, double n,  int acelx){</p>         if (disparando) {             disparando = false;<p style='color:red'>-            return new DisparoCannon(context, x, y, pendiente, acelx );</p><p style='color:green'>+            return new DisparoCannon(context, x, y, pendiente, n, acelx );</p>         }         return null;     }diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DisparoCannon.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DisparoCannon.javaindex abb9ded..2b80979 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DisparoCannon.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/DisparoCannon.java</p>@@ -13,28 +13,32 @@ public class DisparoCannon extends Modelo {     public int aceleracionY = -6;     public int aceleracionX;     private double pendienteRecta;<p style='color:green'>+    private double n;</p>  <p style='color:red'>-    private boolean haciaDerecha;</p><p style='color:red'>-</p><p style='color:red'>-</p><p style='color:red'>-    public DisparoCannon (Context context, double x, double y, double pendiente, int acelx) {</p><p style='color:green'>+    public DisparoCannon (Context context, double x, double y, double pendiente,  double n, int acelx) {</p>         super(context, x, y);         altura = Ar.altura(20);         ancho = Ar.ancho(20);          aceleracionX = acelx;         pendienteRecta = pendiente;<p style='color:green'>+        this.n = n;</p>         imagen = context.getResources().getDrawable(R.drawable.disparo_cannon);     }      public void moverAutomaticamente() {         //y= mx x = y/m<p style='color:red'>-</p><p style='color:red'>-        double newY = y + aceleracionY;</p><p style='color:green'>+        //double newY = y + aceleracionY;</p><p style='color:green'>+        if (x >= mCanvasAncho ){</p><p style='color:green'>+            rebotarDerecha();</p><p style='color:green'>+        }</p><p style='color:green'>+        if ( x <= 0){</p><p style='color:green'>+            rebotarIzquierda();</p><p style='color:green'>+        }</p>         double newX = x + aceleracionX;<p style='color:red'>-        y = pendienteRecta*newX;</p><p style='color:red'>-        x = newY/pendienteRecta;</p><p style='color:green'>+        y = pendienteRecta*newX + n;</p><p style='color:green'>+        x = newX;</p>     }      public void moverRapido(){@@ -52,5 +56,24 @@ public class DisparoCannon extends Modelo {         return -1;     } <p style='color:green'>+    private void rebotarIzquierda() {        //invertir la pendiente</p><p style='color:green'>+        double newX = 0;</p><p style='color:green'>+        double newY = (pendienteRecta * newX) + n;</p><p style='color:green'>+        this.pendienteRecta = pendienteRecta *(-1);</p><p style='color:green'>+        //y = mCanvasAltura;</p><p style='color:green'>+        this.n = newY - (pendienteRecta*newX);</p><p style='color:green'>+        this.aceleracionX = aceleracionX * -1;</p><p style='color:green'>+</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    private void rebotarDerecha() {</p><p style='color:green'>+        double newX = mCanvasAncho;</p><p style='color:green'>+        double newY = (pendienteRecta * newX) + n;</p><p style='color:green'>+        this.pendienteRecta = pendienteRecta *(-1);</p><p style='color:green'>+        //y = mCanvasAltura;</p><p style='color:green'>+        this.n = newY - (pendienteRecta*newX);</p><p style='color:green'>+        this.aceleracionX = aceleracionX * -1;</p><p style='color:green'>+    }</p><p style='color:green'>+</p>  }commit ff4ea2661f424759e9d480c3dff9a9c1ac1cf027Author: soynombrecap <nfm_95@hotmail.com>Date:   Thu Dec 14 20:04:51 2017 +0100    imagenes update 3 files changed, 15 insertions(+)diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/graficos/Sprite.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/graficos/Sprite.javaindex ab13a5e..075bca2 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/graficos/Sprite.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/graficos/Sprite.java</p>@@ -57,6 +57,21 @@ public class Sprite {         tiempoUltimaActualizacion = 0l;     } <p style='color:green'>+    public Sprite(Bitmap bitmap, int modeloAncho, int modeloAltura, int fps, int framesTotales, boolean bucle, int numFilas) {</p><p style='color:green'>+        this.bitmap = bitmap;</p><p style='color:green'>+        this.modeloAncho = modeloAncho;</p><p style='color:green'>+        this.modeloAltura = modeloAltura;</p><p style='color:green'>+        this.framesTotales = framesTotales;</p><p style='color:green'>+        this.bucle = bucle;</p><p style='color:green'>+</p><p style='color:green'>+        frameActual = 0;</p><p style='color:green'>+        spriteAncho = bitmap.getWidth() / framesTotales;</p><p style='color:green'>+        spriteAltura = bitmap.getHeight()/ numFilas;</p><p style='color:green'>+        rectanguloDibujo = new Rect(0, 0, spriteAncho, spriteAltura);</p><p style='color:green'>+        interavaloEntreFrames = 1000 / fps;</p><p style='color:green'>+        tiempoUltimaActualizacion = 0l;</p><p style='color:green'>+    }</p><p style='color:green'>+</p>     public boolean actualizar (long tiempo) {         boolean finSprite = false; diff --git a/app/src/main/res/drawable/ballesta1.png b/app/src/main/res/drawable/ballesta1.pngdeleted file mode 100644index 748d3f8..0000000Binary files a/app/src/main/res/drawable/ballesta1.png and /dev/null differdiff --git a/app/src/main/res/drawable/chronometer.png b/app/src/main/res/drawable/chronometer.pngnew file mode 100644index 0000000..9e93690Binary files /dev/null and b/app/src/main/res/drawable/chronometer.png differcommit cf86bb442ab148ec57e8a049d3d5bf3166089d8dAuthor: soynombrecap <nfm_95@hotmail.com>Date:   Thu Dec 14 17:44:32 2017 +0100    Cannon to game view 1 file changed, 4 insertions(+), 1 deletion(-)diff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.javaindex 1a4cbe4..8e34561 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/GameView.java</p>@@ -9,6 +9,7 @@ import java.util.LinkedList; import java.util.List; import java.util.concurrent.TimeUnit; <p style='color:green'>+import es.uniovi.balbuena.juegodianas.modelos.Cannon;</p> import es.uniovi.balbuena.juegodianas.modelos.Diana; import es.uniovi.balbuena.juegodianas.modelos.DianaFacil; import es.uniovi.balbuena.juegodianas.modelos.escenario.Fondo;@@ -28,6 +29,7 @@ public class GameView extends View {     //objetos, personajes y demas      private Fondo fondo;<p style='color:green'>+    private Cannon cannon;</p>     private List<Diana> dianas;      public GameView(Context context) {@@ -40,6 +42,7 @@ public class GameView extends View {     private void inicializar(Context context) {          fondo = new Fondo (context, Ar.x(320/2), Ar.y(480/2));<p style='color:green'>+        cannon = new Cannon(context,  Ar.x(320/2), Ar.y(300));</p>         Diana d = new DianaFacil(context, 75, 75);          dianas = new LinkedList<Diana>();@@ -57,7 +60,7 @@ public class GameView extends View {     protected void onDraw(Canvas canvas) {         try {             fondo.dibujarEnPantalla(canvas);<p style='color:red'>-</p><p style='color:green'>+            cannon.dibujarEnPantalla(canvas);</p>             for (Diana diana : dianas                  ) {                 diana.dibujarEnPantalla(canvas);commit 771849f4ceafe6832e4c5acfa61e4304d84bd8d8Author: soynombrecap <nfm_95@hotmail.com>Date:   Thu Dec 14 17:29:38 2017 +0100    A√±adido sprites y logica cannon 11 files changed, 162 insertions(+), 3 deletions(-)diff --git a/.idea/compiler.xml b/.idea/compiler.xmlnew file mode 100644index 0000000..96cc43e<p style='color:red'>--- /dev/null</p><p style='color:green'>+++ b/.idea/compiler.xml</p>@@ -0,0 +1,22 @@<p style='color:green'>+<?xml version="1.0" encoding="UTF-8"?></p><p style='color:green'>+<project version="4"></p><p style='color:green'>+  <component name="CompilerConfiguration"></p><p style='color:green'>+    <resourceExtensions /></p><p style='color:green'>+    <wildcardResourcePatterns></p><p style='color:green'>+      <entry name="!?*.java" /></p><p style='color:green'>+      <entry name="!?*.form" /></p><p style='color:green'>+      <entry name="!?*.class" /></p><p style='color:green'>+      <entry name="!?*.groovy" /></p><p style='color:green'>+      <entry name="!?*.scala" /></p><p style='color:green'>+      <entry name="!?*.flex" /></p><p style='color:green'>+      <entry name="!?*.kt" /></p><p style='color:green'>+      <entry name="!?*.clj" /></p><p style='color:green'>+      <entry name="!?*.aj" /></p><p style='color:green'>+    </wildcardResourcePatterns></p><p style='color:green'>+    <annotationProcessing></p><p style='color:green'>+      <profile default="true" name="Default" enabled="false"></p><p style='color:green'>+        <processorPath useClasspath="true" /></p><p style='color:green'>+      </profile></p><p style='color:green'>+    </annotationProcessing></p><p style='color:green'>+  </component></p><p style='color:green'>+</project></p>\ No newline at end of filediff --git a/.idea/copyright/profiles_settings.xml b/.idea/copyright/profiles_settings.xmlnew file mode 100644index 0000000..e7bedf3<p style='color:red'>--- /dev/null</p><p style='color:green'>+++ b/.idea/copyright/profiles_settings.xml</p>@@ -0,0 +1,3 @@<p style='color:green'>+<component name="CopyrightManager"></p><p style='color:green'>+  <settings default="" /></p><p style='color:green'>+</component></p>\ No newline at end of filediff --git a/.idea/modules.xml b/.idea/modules.xmlindex 210b764..bf15426 100644<p style='color:red'>--- a/.idea/modules.xml</p><p style='color:green'>+++ b/.idea/modules.xml</p>@@ -3,9 +3,7 @@   <component name="ProjectModuleManager">     <modules>       <module fileurl="file://$PROJECT_DIR$/JuegoDianas.iml" filepath="$PROJECT_DIR$/JuegoDianas.iml" /><p style='color:red'>-      <module fileurl="file://C:\Users\NFM_9\Desktop\Nachin\UNI\SEV\JuegoDianas\JuegoDianas.iml" filepath="C:\Users\NFM_9\Desktop\Nachin\UNI\SEV\JuegoDianas\JuegoDianas.iml" /></p>       <module fileurl="file://$PROJECT_DIR$/app/app.iml" filepath="$PROJECT_DIR$/app/app.iml" /><p style='color:red'>-      <module fileurl="file://C:\Users\NFM_9\Desktop\Nachin\UNI\SEV\JuegoDianas\app\app.iml" filepath="C:\Users\NFM_9\Desktop\Nachin\UNI\SEV\JuegoDianas\app\app.iml" /></p>     </modules>   </component> </project>\ No newline at end of filediff --git a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Cannon.java b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Cannon.javaindex 7c84bf3..a18bbde 100644<p style='color:red'>--- a/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Cannon.java</p><p style='color:green'>+++ b/app/src/main/java/es/uniovi/balbuena/juegodianas/modelos/Cannon.java</p>@@ -1,8 +1,13 @@ package es.uniovi.balbuena.juegodianas.modelos;  import android.content.Context;<p style='color:green'>+import android.graphics.BitmapFactory;</p> import android.graphics.Canvas; <p style='color:green'>+import java.util.HashMap;</p><p style='color:green'>+</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.R;</p><p style='color:green'>+import es.uniovi.balbuena.juegodianas.graficos.Sprite;</p> import es.uniovi.balbuena.juegodianas.modelos.utilidades.Ar;  /**@@ -11,18 +16,149 @@ import es.uniovi.balbuena.juegodianas.modelos.utilidades.Ar;  public class Cannon extends Modelo { <p style='color:green'>+    public static final String BASICO = "Basico";</p><p style='color:green'>+    public static final String DISPARAR = "Disparar";</p><p style='color:green'>+</p><p style='color:green'>+    private boolean disparando;</p><p style='color:green'>+</p><p style='color:green'>+    private Sprite sprite;</p><p style='color:green'>+    private HashMap<String,Sprite> sprites = new HashMap<String,Sprite> ();</p><p style='color:green'>+</p>     public Cannon(Context context, double x, double y) {         super(context, x, y);         altura = Ar.altura(75);         ancho = Ar.ancho(75);<p style='color:green'>+</p><p style='color:green'>+        Sprite basico = new Sprite(BitmapFactory.decodeResource(</p><p style='color:green'>+                context.getResources(), R.drawable.sprite_cannon_basico),</p><p style='color:green'>+                ancho, altura,</p><p style='color:green'>+                4, 12, true);</p><p style='color:green'>+        sprites.put(BASICO, basico);</p><p style='color:green'>+</p><p style='color:green'>+        Sprite disparar = new Sprite(BitmapFactory.decodeResource(</p><p style='color:green'>+                context.getResources(), R.drawable.sprite_cannon_disparar),</p><p style='color:green'>+                ancho, altura,</p><p style='color:green'>+                4, 12, false);</p><p style='color:green'>+        sprites.put(DISPARAR, disparar);</p><p style='color:green'>+</p><p style='color:green'>+        sprite = basico;</p>     }      public DisparoCannon disparar(){<p style='color:green'>+        if (disparando) {</p><p style='color:green'>+            disparando = false;</p><p style='color:green'>+            return new DisparoCannon(context, x, y);</p><p style='color:green'>+        }</p>         return null;     }      @Override     public void dibujarEnPantalla(Canvas canvas) {<p style='color:red'>-        super.dibujarEnPantalla(canvas);</p><p style='color:green'>+        sprite.dibujarSprite(canvas, (int) x, (int) y);</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public boolean isDisparando() {</p><p style='color:green'>+        return disparando;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public void setDisparando(boolean disparando) {</p><p style='color:green'>+        this.disparando = disparando;</p>     } }<p style='color:green'>+</p><p style='color:green'>+/*</p><p style='color:green'>+public class Nave extends Modelo {</p><p style='color:green'>+    public static final String BASICO = "Basico";</p><p style='color:green'>+    public static final String IMPACTADO = "Explotar";</p><p style='color:green'>+    private Sprite sprite;</p><p style='color:green'>+    private HashMap<String,Sprite> sprites = new HashMap<String,Sprite> ();</p><p style='color:green'>+</p><p style='color:green'>+</p><p style='color:green'>+    private double aceleracionX;</p><p style='color:green'>+    protected boolean disparando = false;</p><p style='color:green'>+</p><p style='color:green'>+    public Nave(Context context, double x, double y) {</p><p style='color:green'>+        super(context, x, y);</p><p style='color:green'>+        altura = 63;</p><p style='color:green'>+        ancho = 50;</p><p style='color:green'>+</p><p style='color:green'>+        Sprite basico = new Sprite(BitmapFactory.decodeResource(</p><p style='color:green'>+                context.getResources(), R.drawable.animacion_nave),</p><p style='color:green'>+                ancho, altura,</p><p style='color:green'>+                12, 4, true);</p><p style='color:green'>+        sprites.put(BASICO, basico);</p><p style='color:green'>+</p><p style='color:green'>+        Sprite impactado = new Sprite(BitmapFactory.decodeResource(</p><p style='color:green'>+                context.getResources(), R.drawable.animacion_nave_explota),</p><p style='color:green'>+                ancho, altura,</p><p style='color:green'>+                4, 12, false);</p><p style='color:green'>+        sprites.put(IMPACTADO, impactado);</p><p style='color:green'>+</p><p style='color:green'>+        sprite = basico;</p><p style='color:green'>+</p><p style='color:green'>+</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public void acelerar(float factorMovimiento) {</p><p style='color:green'>+        if ( factorMovimiento < 0){</p><p style='color:green'>+            aceleracionX = 2;</p><p style='color:green'>+        }</p><p style='color:green'>+        if ( factorMovimiento >= 0){</p><p style='color:green'>+            aceleracionX = -2;</p><p style='color:green'>+        }</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public void frenar(){</p><p style='color:green'>+        aceleracionX = 0;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public DisparoNave disparar() {</p><p style='color:green'>+        if (disparando) {</p><p style='color:green'>+            disparando = false;</p><p style='color:green'>+            return new DisparoNave(context, x, y);</p><p style='color:green'>+        }</p><p style='color:green'>+        return null;</p><p style='color:green'>+</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    @Override</p><p style='color:green'>+    public void dibujarEnPantalla(Canvas canvas) {</p><p style='color:green'>+        sprite.dibujarSprite(canvas, (int) x, (int) y);</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+</p><p style='color:green'>+    public void mover(){</p><p style='color:green'>+        boolean finalizaSprite =</p><p style='color:green'>+                sprite.actualizar(System.currentTimeMillis());</p><p style='color:green'>+</p><p style='color:green'>+        if (sprite == sprites.get(IMPACTADO) && finalizaSprite) {</p><p style='color:green'>+            sprite = sprites.get(BASICO);</p><p style='color:green'>+        }</p><p style='color:green'>+</p><p style='color:green'>+        x = x + aceleracionX;</p><p style='color:green'>+</p><p style='color:green'>+        if( x  < 0){</p><p style='color:green'>+            x = 0;</p><p style='color:green'>+        }</p><p style='color:green'>+        if ( x  > mCanvasAncho  ){</p><p style='color:green'>+            x  = mCanvasAncho;</p><p style='color:green'>+        }</p><p style='color:green'>+</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public void impactado(){</p><p style='color:green'>+        sprite = sprites.get(IMPACTADO);</p><p style='color:green'>+        sprite.setFrameActual(0); // Reiniciar el Sprite</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+</p><p style='color:green'>+    public boolean isDisparando() {</p><p style='color:green'>+        return disparando;</p><p style='color:green'>+    }</p><p style='color:green'>+</p><p style='color:green'>+    public void setDisparando(boolean disparando) {</p><p style='color:green'>+        this.disparando = disparando;</p><p style='color:green'>+    }</p><p style='color:green'>+}</p><p style='color:green'>+</p><p style='color:green'>+ */</p>diff --git a/app/src/main/res/drawable/diana1.png b/app/src/main/res/drawable/diana1.pngindex 0560819..78a265b 100644Binary files a/app/src/main/res/drawable/diana1.png and b/app/src/main/res/drawable/diana1.png differdiff --git a/app/src/main/res/drawable/diana2.png b/app/src/main/res/drawable/diana2.pngindex 9e2efb0..5a09469 100644Binary files a/app/src/main/res/drawable/diana2.png and b/app/src/main/res/drawable/diana2.png differdiff --git a/app/src/main/res/drawable/diana3.png b/app/src/main/res/drawable/diana3.pngindex 6cad97b..6f9809d 100644Binary files a/app/src/main/res/drawable/diana3.png and b/app/src/main/res/drawable/diana3.png differdiff --git a/app/src/main/res/drawable/diana4.png b/app/src/main/res/drawable/diana4.pngnew file mode 100644index 0000000..2c53b59Binary files /dev/null and b/app/src/main/res/drawable/diana4.png differdiff --git a/app/src/main/res/drawable/logo_universidad.jpg b/app/src/main/res/drawable/logo_universidad.jpgdeleted file mode 100644index bbb9d2d..0000000Binary files a/app/src/main/res/drawable/logo_universidad.jpg and /dev/null differdiff --git a/app/src/main/res/drawable/sprite_cannon_basico.png b/app/src/main/res/drawable/sprite_cannon_basico.pngnew file mode 100644index 0000000..0c3e605Binary files /dev/null and b/app/src/main/res/drawable/sprite_cannon_basico.png differdiff --git a/app/src/main/res/drawable/sprite_cannon.png b/app/src/main/res/drawable/sprite_cannon_disparar.pngsimilarity index 100%rename from app/src/main/res/drawable/sprite_cannon.pngrename to app/src/main/res/drawable/sprite_cannon_disparar.png